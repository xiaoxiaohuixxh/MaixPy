diff -Nur /home/wipping/k210-freertos-mpy-makefile/ports/k210-freertos/kendryte-freertos-sdk/lib/freertos/conf/FreeRTOSConfig.h kendryte-freertos-sdk/lib/freertos/conf/FreeRTOSConfig.h
--- /home/wipping/k210-freertos-mpy-makefile/ports/k210-freertos/kendryte-freertos-sdk/lib/freertos/conf/FreeRTOSConfig.h	2018-11-26 06:34:44.354432521 +0000
+++ kendryte-freertos-sdk/lib/freertos/conf/FreeRTOSConfig.h	2018-11-25 05:11:51.332272646 +0000
@@ -68,7 +68,7 @@
 #define configUSE_PORT_OPTIMISED_TASK_SELECTION	0
 #define configMAX_PRIORITIES					( 5 )
 #define configMAX_TASK_NAME_LEN					( 16 )
-#define configUSE_TRACE_FACILITY				0
+#define configUSE_TRACE_FACILITY				1
 #define configUSE_16_BIT_TICKS					0
 #define configIDLE_SHOULD_YIELD					0
 #define configQUEUE_REGISTRY_SIZE				8
@@ -79,7 +79,7 @@
     PTHREAD_TLS_INDEX = 0
 };
 
-#define configNUM_THREAD_LOCAL_STORAGE_POINTERS 1
+#define configNUM_THREAD_LOCAL_STORAGE_POINTERS 20
 
 /* mutex */
 #define configUSE_MUTEXES						1
diff -Nur /home/wipping/k210-freertos-mpy-makefile/ports/k210-freertos/kendryte-freertos-sdk/lib/freertos/tasks.c kendryte-freertos-sdk/lib/freertos/tasks.c
--- /home/wipping/k210-freertos-mpy-makefile/ports/k210-freertos/kendryte-freertos-sdk/lib/freertos/tasks.c	2018-11-26 06:34:44.362432482 +0000
+++ kendryte-freertos-sdk/lib/freertos/tasks.c	2018-11-25 05:11:51.336272769 +0000
@@ -3586,8 +3586,8 @@
 
 	void vTaskGetInfo( TaskHandle_t xTask, TaskStatus_t *pxTaskStatus, BaseType_t xGetFreeStackSpace, eTaskState eState )
 	{
-	TCB_t *pxTCB;
-
+		TCB_t *pxTCB;
+		UBaseType_t uxPsrId = uxPortGetProcessorId();
 		/* xTask is NULL then get the state of the calling task. */
 		pxTCB = prvGetTCBFromHandle( xTask );
 
@@ -4256,7 +4256,7 @@
 	TaskStatus_t *pxTaskStatusArray;
 	volatile UBaseType_t uxArraySize, x;
 	char cStatus;
-
+	UBaseType_t uxPsrId = uxPortGetProcessorId();
 		/*
 		 * PLEASE NOTE:
 		 *
@@ -4292,7 +4292,7 @@
 		/* Allocate an array index for each task.  NOTE!  if
 		configSUPPORT_DYNAMIC_ALLOCATION is set to 0 then pvPortMalloc() will
 		equate to NULL. */
-		pxTaskStatusArray = pvPortMalloc( uxCurrentNumberOfTasks * sizeof( TaskStatus_t ) );
+		pxTaskStatusArray = pvPortMalloc( uxCurrentNumberOfTasks[uxPsrId] * sizeof( TaskStatus_t ) );
 
 		if( pxTaskStatusArray != NULL )
 		{
